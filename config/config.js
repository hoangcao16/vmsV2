import { join } from 'path';
import { defineConfig } from 'umi';

import defaultSettings from './defaultSettings';
import proxy from './proxy';
import routes from './routes';

const { REACT_APP_ENV } = process.env;

export default defineConfig({
    hash: true,
    antd: {},
    dva: {
        hmr: true,
    },
    layout: {
        locale: true,
        siderWidth: 208,
        ...defaultSettings,
    },
    locale: {
        default: 'vi-VN',
        antd: true,
        baseNavigator: true,
    },
    dynamicImport: {
        loading: '@/components/CustomLoading',
    },
    targets: {
        ie: 11,
    },
    routes: routes,
    access: {},

    theme: {
        primaryColor: '#1890ff',
    },

    esbuild: {},
    title: false,
    ignoreMomentLocale: true,
    proxy: proxy[REACT_APP_ENV || 'dev'],
    manifest: {
        basePath: '/',
    },

    fastRefresh: {},
    openAPI: [{
            requestLibPath: "import { request } from 'umi'",
            schemaPath: join(__dirname, 'oneapi.json'),
            mock: false,
        },
        {
            requestLibPath: "import { request } from 'umi'",
            schemaPath: 'https://gw.alipayobjects.com/os/antfincdn/CA1dOm%2631B/openapi.json',
            projectName: 'swagger',
        },
    ],
    nodeModulesTransform: {
        type: 'none',
    },
    // mfsu: {},
    webpack5: {},
    exportStatic: {},
    define: {
        ...process.env,
    },
});